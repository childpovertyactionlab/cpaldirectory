<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.340">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>Tools and Packages</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<link href="./www/images/CPAL_favicon.ico" rel="icon">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit"
  }
}</script>


</head>

<body class="nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg navbar-dark ">
      <div class="navbar-container container-fluid">
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item">
    <a class="nav-link" href="./index.html" rel="" target=""><i class="bi bi-house-door-fill" role="img">
</i> 
 <span class="menu-text">Home</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./projectdirectory.html" rel="" target=""><i class="bi bi-card-list" role="img">
</i> 
 <span class="menu-text">Directory</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link active" href="./toolsandpackages.html" rel="" target="" aria-current="page"><i class="bi bi-box-seam" role="img">
</i> 
 <span class="menu-text">Tools</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./functions.html" rel="" target=""><i class="bi bi-box-seam" role="img">
</i> 
 <span class="menu-text">Functions</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./templates.html" rel="" target=""><i class="bi bi-box-seam" role="img">
</i> 
 <span class="menu-text">Templates</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./dataviz.html" rel="" target=""><i class="bi bi-bar-chart-fill" role="img">
</i> 
 <span class="menu-text">Visualization</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="https://github.com/childpovertyactionlab/" rel="" target=""><i class="bi bi-github" role="img">
</i> 
 <span class="menu-text">Github</span></a>
  </li>  
</ul>
            <div class="quarto-navbar-tools">
</div>
          </div> <!-- /navcollapse -->
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<header id="title-block-header" class="quarto-title-block default page-columns page-full">
  <div class="quarto-title-banner page-columns page-full">
    <div class="quarto-title column-body">
      <h1 class="title">Tools and Packages</h1>
                      </div>
  </div>
    
  
  <div class="quarto-title-meta">

      
    
      
    </div>
    
  
  </header><div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#about-our-tools" id="toc-about-our-tools" class="nav-link active" data-scroll-target="#about-our-tools">About Our Tools</a></li>
  <li><a href="#program-installation" id="toc-program-installation" class="nav-link" data-scroll-target="#program-installation">Program Installation</a>
  <ul>
  <li><a href="#install-r" id="toc-install-r" class="nav-link" data-scroll-target="#install-r">Install R</a></li>
  <li><a href="#install-rstudio" id="toc-install-rstudio" class="nav-link" data-scroll-target="#install-rstudio">Install RStudio</a></li>
  <li><a href="#install-rtools" id="toc-install-rtools" class="nav-link" data-scroll-target="#install-rtools">Install RTools</a></li>
  <li><a href="#install-quarto" id="toc-install-quarto" class="nav-link" data-scroll-target="#install-quarto">Install Quarto</a></li>
  <li><a href="#install-cran-packages" id="toc-install-cran-packages" class="nav-link" data-scroll-target="#install-cran-packages">Install CRAN Packages</a></li>
  <li><a href="#install-cpal-packages" id="toc-install-cpal-packages" class="nav-link" data-scroll-target="#install-cpal-packages">Install CPAL Packages</a>
  <ul class="collapse">
  <li><a href="#cpaldirectory" id="toc-cpaldirectory" class="nav-link" data-scroll-target="#cpaldirectory">cpaldirectory</a></li>
  <li><a href="#cpaltemplates" id="toc-cpaltemplates" class="nav-link" data-scroll-target="#cpaltemplates">cpaltemplates</a></li>
  <li><a href="#cpalthemes" id="toc-cpalthemes" class="nav-link" data-scroll-target="#cpalthemes">cpalthemes</a></li>
  <li><a href="#cpaltools" id="toc-cpaltools" class="nav-link" data-scroll-target="#cpaltools">cpaltools</a></li>
  </ul></li>
  <li><a href="#additional-programs" id="toc-additional-programs" class="nav-link" data-scroll-target="#additional-programs">Additional Programs</a></li>
  </ul></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content quarto-banner-title-block" id="quarto-document-content">




<section id="about-our-tools" class="level1">
<h1>About Our Tools</h1>
<p>As part of our data-driven approach to making a positive impact, we rely on the programming language R to drive our work forward. With R at the core of our analytics toolkit, we harness its versatility and extensive library of packages to tackle complex challenges and uncover valuable insights.</p>
<p>As an analytics team, our primary focus is on leveraging R’s capabilities to analyze and visualize data, build statistical models, and develop predictive algorithms. R enables us to efficiently manipulate and transform data, ensuring that we can extract meaningful information and uncover hidden patterns.</p>
<p>Our team fosters a collaborative environment, where we share knowledge, explore innovative approaches, and support one another in leveraging R to its full potential. Through the use of R and its associated packages, we strive to harness the power of data and analytics to drive evidence-based decision-making and make a meaningful difference in the communities we serve.</p>
</section>
<section id="program-installation" class="level1">
<h1>Program Installation</h1>
<p>To facilitate our work, we extensively utilize various R packages that cater to our specific needs. These packages provide us with specialized functions and tools to enhance our analytical capabilities.</p>
<p>We have also developed a number of packages containing themes and templates in order to facilitate brand consistency across our products.</p>
<section id="install-r" class="level2">
<h2 data-anchor-id="install-r">Install R</h2>
<p>R is a programming language and environment specifically designed for statistical computing and graphics. It provides a wide range of statistical and graphical techniques, and it is widely used in data analysis, data visualization, machine learning, and statistical modeling.</p>
<p>To install R, follow these steps:</p>
<ul>
<li>Visit the official R website at https://cran.r-project.org/.</li>
<li>Under the ‘Download and Install R’ section click on the most recent release for your platform.</li>
<li>Select the base sub-directory.</li>
<li>Download the most recent release for your platform.</li>
<li>Run the installer file and follow the installation wizard instructions.</li>
</ul>
</section>
<section id="install-rstudio" class="level2">
<h2 data-anchor-id="install-rstudio">Install RStudio</h2>
<p>RStudio is an integrated development environment (IDE) for the R programming language. It provides a user-friendly interface for writing, debugging, and running R code, as well as features for data analysis, visualization, and package management. RStudio is available in both open-source and commercial versions.</p>
<p>To install RStudio, follow these steps:</p>
<ul>
<li>Visit the official RStudio website at https://posit.co/download/rstudio-desktop/.</li>
<li>Download the most recent release for your platform.</li>
<li>Run the installer file and follow the installation wizard instructions.</li>
</ul>
</section>
<section id="install-rtools" class="level2">
<h2 data-anchor-id="install-rtools">Install RTools</h2>
<p>RTools is a collection of software tools required to build and install R packages on Windows. It includes a C/C++ compiler, make tools, and other utilities necessary for compiling packages with native code extensions. To install RTools, follow these steps:</p>
<ul>
<li>Visit the official RTools website at https://cran.r-project.org/bin/windows/Rtools/.</li>
<li>Download the most recent release for your platform that matches your installed version of R.</li>
<li>Run the installer file and follow the installation wizard instructions.</li>
</ul>
</section>
<section id="install-quarto" class="level2">
<h2 data-anchor-id="install-quarto">Install Quarto</h2>
<p>Quarto is a document format and toolchain for scientific and technical publishing. It allows you to create dynamic and reproducible documents that combine code, text, and visualizations. Quarto integrates with programming languages such as R, Python, and Julia, and supports various output formats like HTML, PDF, and Word.</p>
<p>To install RStudio, follow these steps:</p>
<ul>
<li>Visit the official Quarto website at https://quarto.org/.</li>
<li>Click on the ‘Get Started’ section.</li>
<li>Download the most recent release for your platform.</li>
<li>Run the installer file and follow the installation wizard instructions.</li>
</ul>
</section>
<section id="install-cran-packages" class="level2">
<h2 data-anchor-id="install-cran-packages">Install CRAN Packages</h2>
<p>In <code>R</code> we primarily use packages from the tidyverse in our analysis pipeline such as dplyr, tidyr, and stringr among others. These are the following packages you should have installed on your computer for visualization across the team.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse) <span class="co"># Hadley Wickham universe of packages</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidycensus) <span class="co"># Interaction with census API</span></span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(googlesheets4) <span class="co"># Interaction with google ecosystem</span></span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(sf) <span class="co"># Geographic analysis and data wrangling</span></span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(arcgisbinding) <span class="co"># interaction with ArcGIS</span></span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidygeocoder) <span class="co"># geocoding</span></span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tigris) <span class="co"># shapefiles</span></span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(lubridate)</span>
<span id="cb1-10"><a href="#cb1-10" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(shiny) <span class="co"># dashboard tool</span></span>
<span id="cb1-11"><a href="#cb1-11" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggplot2) <span class="co"># visualization</span></span>
<span id="cb1-12"><a href="#cb1-12" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(leaflet) <span class="co"># interactive maps</span></span>
<span id="cb1-13"><a href="#cb1-13" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(leaflet.extras) <span class="co"># more map options</span></span>
<span id="cb1-14"><a href="#cb1-14" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(plotly) <span class="co"># interactive graphs</span></span>
<span id="cb1-15"><a href="#cb1-15" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(reactable) <span class="co"># interactive tables</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p><strong>arcgisbinding</strong> provides a bridge between R and the ArcGIS geospatial software. It allows users to interact with ArcGIS tools and data directly from R, enabling spatial data analysis and manipulation.</p>
<p><strong>dplyr</strong> is a popular package for data manipulation and transformation in R. It provides a set of functions that streamline the process of filtering, selecting, summarizing, and joining datasets, making it easier to work with data frames.</p>
<p><strong>forcats</strong> is a package that focuses on handling and manipulating categorical variables in R. It provides functions to reorder, rename, and recode factor levels, as well as tools for creating summaries and visualizations of categorical data.</p>
<p><strong>ggplot2</strong> is a powerful package for data visualization in R. It implements the grammar of graphics, allowing users to create highly customizable and publication-quality plots with a concise syntax.</p>
<p><strong>googlesheets4</strong> is a package that facilitates the interaction with Google Sheets from R. It provides functions to read, write, and modify Google Sheets, enabling seamless integration of spreadsheet data in R workflows.</p>
<p><strong>janitor</strong> is a package that offers various functions for cleaning and tidying messy datasets in R. It provides tools to handle missing values, remove duplicated rows, and transform data into a tidy format, making it easier to analyze and visualize.</p>
<p><strong>leaflet</strong> is a package for creating interactive maps in R. It allows users to generate maps with various base layers, add markers, shapes, and other graphical elements, and customize the interactive features for web-based visualization.</p>
<p><strong>leaflet.extras</strong> is an extension package for leaflet that provides additional functionality and components for interactive mapping in R. It offers features such as heatmaps, clustered markers, and advanced controls to enhance the capabilities of leaflet.</p>
<p><strong>lubridate</strong> is a package that facilitates the manipulation and parsing of dates and times. It provides a set of functions that simplify common date-related tasks, such as extracting components from a date-time object, modifying specific components, and performing calculations with dates and times.</p>
<p><strong>plotly</strong> is a package for creating interactive and dynamic visualizations in R. It supports a wide range of chart types and provides tools for adding interactivity, such as tooltips and zooming, making it useful for exploratory data analysis and web-based dashboards.</p>
<p><strong>purrr</strong> is a package that enhances the functional programming capabilities in R. It provides a set of functions that enable more concise and expressive code for working with lists, vectors, and other data structures.</p>
<p><strong>reactable</strong> is a package for creating interactive tables in R. It allows users to create customizable and responsive tables with features like sorting, filtering, pagination, and row grouping, making it suitable for presenting and exploring tabular data.</p>
<p><strong>rio</strong> is a package that simplifies the import and export of data between R and various file formats. It provides a unified interface for reading and writing data in formats such as CSV, Excel, SPSS, and Stata, reducing the need for format-specific functions.</p>
<p><strong>sf</strong> is a package for working with spatial data in R. It provides classes and functions for handling spatial objects, performing geometric operations, and conducting spatial analysis, enabling efficient and intuitive manipulation of spatial datasets.</p>
<p><strong>shiny</strong> is a web application framework for R. It allows users to create interactive web applications directly from R scripts, enabling the development of data-driven dashboards, interactive visualizations, and user interfaces.</p>
<p><strong>stringr</strong> is a package that provides a set of functions for manipulating and working with strings in R. It offers tools for pattern matching, string splitting, substitution, and other common string operations, simplifying text data processing</p>
</section>
<section id="install-cpal-packages" class="level2">
<h2 data-anchor-id="install-cpal-packages">Install CPAL Packages</h2>
<section id="cpaldirectory" class="level3">
<h3 data-anchor-id="cpaldirectory">cpaldirectory</h3>
<p>Directory for CPAL Analytics team to organize visualization code and projects into a centralized location. This website is built from this repository.</p>
<p>You can install the latest version of <code>cpaldirectory</code> from GitHub:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="co"># install.packages("devtools")</span></span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a><span class="co">#devtools::install_github("childpovertyactionlab/cpaldirectory")</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="cpaltemplates" class="level3">
<h3 data-anchor-id="cpaltemplates">cpaltemplates</h3>
<p>Primary package containing templates and tools for new project generation across CPAL Analytics data projects. Contains templates for shiny, web reports, websites, project directories, and visualizations.</p>
<p>You can install the latest version of <code>cpaltemplates</code> from GitHub:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="co"># install.packages("devtools")</span></span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a><span class="co">#devtools::install_github("childpovertyactionlab/cpaltemplates")</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="cpalthemes" class="level3">
<h3 data-anchor-id="cpalthemes">cpalthemes</h3>
<p>A package containing functions for analysis by CPAL Analytics team.</p>
<p>You can install the latest version of <code>cpalthemes</code> from GitHub:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="co"># install.packages("devtools")</span></span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a><span class="co">#devtools::install_github("childpovertyactionlab/cpalthemes")</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="cpaltools" class="level3">
<h3 data-anchor-id="cpaltools">cpaltools</h3>
<p>A package containing functions for analysis by CPAL Analytics team.</p>
<p>You can install the latest version of <code>cpaltools</code> from GitHub:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="co"># install.packages("devtools")</span></span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a><span class="co">#devtools::install_github("childpovertyactionlab/cpaltools")</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
</section>
<section id="additional-programs" class="level2">
<h2 data-anchor-id="additional-programs">Additional Programs</h2>


</section>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->
<footer class="footer">
  <div class="nav-footer">
    <div class="nav-footer-left">
      &nbsp;
    </div>   
    <div class="nav-footer-center">Copyright 2023 <b><a href="https://childpovertyactionlab.org/">The Child Poverty Action Lab</a>.</b></div>
    <div class="nav-footer-right">
      &nbsp;
    </div>
  </div>
</footer>



</body></html>