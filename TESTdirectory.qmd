---
title: "Project Directory"
format: html
---

```{r}
#| include: false
library(googlesheets4)
library(knitr)
library(tidyverse)
library(shiny)

projectdir <- read_sheet(ss = "https://docs.google.com/spreadsheets/d/1QuUHl_O4sI7vUFaY54Zf8mnifPOzLU4OYO2x3FblSj8", sheet = "Directory Projects") #%>%
#    mutate(Domain = case_when(
#    Domain == "Well-Resourced Neighborhoods" ~ sprintf('{{< fa people-group size=lg title="Well-Resourced Neighborhoods" >}} Well-Resourced Neighborhoods'),
#    TRUE ~ as.character(Domain)
#  ))
```

<div class="filters">
  <label for="projectNameFilter">Project Name:</label>
  <input type="text" id="projectNameFilter" onkeyup="filterCards()" placeholder="Filter by Project Name...">

  <label for="domainFilter">Domain:</label>
  <select id="domainFilter" onchange="filterCards()">
    <option value="">All Domains</option>
    <!-- Populate with domains -->
  </select>

  <!-- Repeat the above pattern for the other filters: Status, Update Cadence, Audience, Product Type, and Tags -->
</div>

<div class="card-container">

```{r echo=FALSE, results='asis'}
for (i in 1:nrow(projectdir)) {
  row <- projectdir[i, ]
  cat('<div class="card" data-project-name="', row$`Project Name`, 
      '" data-domain="', row$Domain, 
      '" data-status="', row$Status, 
      '" data-update-cadence="', row$`Update Cadence`, 
      '" data-audience="', row$Audience, 
      '" data-product-type="', row$`Product Type`, 
      '" data-tags="', row$Tags, '">\n')
  # ... rest of the card ...
}

```
</div>

<script>
function filterCards() {
  const projectNameFilter = document.getElementById('projectNameFilter').value.toUpperCase();
  // Repeat for other filters...
  
  const cards = document.getElementsByClassName('card');

  Array.from(cards).forEach(function(card) {
    const projectName = card.getAttribute('data-project-name').toUpperCase();
    // Repeat for other data attributes...
    
    // Logic to determine if a card should be shown
    const matchesProjectName = projectName.indexOf(projectNameFilter) > -1 || projectNameFilter === "";
    // Repeat for other matches...
    
    if (matchesProjectName && /* ... other matches ... */) {
      card.style.display = "";
    } else {
      card.style.display = "none";
    }
  });
}
</script>
